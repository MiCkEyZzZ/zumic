//! Конфигурация приложения Zumic.
//!
//! Модуль содержит логику загрузки и валидации конфигурации сервера.
//! Основная публичная точка доступа - подпакет `settings`, который
//! предоставляет типы и ф-ии для работы с конфигурацией (в частности
//! `Settings`).
//!
//! ## Что делает модуль
//! - Загружает настройки из файлов и переменных окружения.
//! - Объединяет источники конфигурации в предсказуемом приоритете.
//! - Предоставляет типобезопасные структуры (`Settings`, `StorageType` и пр.)
//!   для использования в коде сервера.
//! - Выполняет дополнительные адаптации и валидацию (например, backward-compat
//!   для `log_level -> logging.level`).
//!
//! ## Источники конфигурации и приоритет
//! (от низшего к высшему приоритету)
//! 1. `src/config/default.toml` — значения по умолчанию (опционально).
//! 2. `src/config/<ZUMIC_MODE>.toml` — профиль (опционально). Профиль
//!    выбирается через переменную окружения `ZUMIC_MODE` (по умолчанию `dev`).
//! 3. Переменные окружения с префиксом `ZUMIC_` (наивысший приоритет).
//!
//! ## Формат переменных окружения
//! Переменные окружения должны иметь префикс `ZUMIC_` и использовать `_` как
//! разделитель для вложенных полей, например:
//! ```text
//! ZUMIC_LISTEN_ADDRESS=127.0.0.1:6174
//! ZUMIC_LOGGING_LEVEL=debug
//! ZUMIC_PERSISTENT_STORE__SYNC_POLICY=Always
//! ```
//!
//! ## Основные экспортируемые символы
//! - `settings::Settings` — центральный набор параметров приложения.
//! - `settings::StorageType` — enum с вариантами `memory`, `persistent`,
//!   `cluster`.
//! - `settings::StorageConfig` — производная конфигурация для слоя хранения.
//! - `LoggingConfig` (импортируется/используется внутри `settings`) —
//!   расширенные параметры логирования.
//!
//! ## Пример использования
//! ```rust
//! use zumic::Settings;
//!
//! let settings = Settings::load().expect("failed to load configuration");
//! println!("listen on: {}", settings.listen_address);
//! ```
//!
//! ## Тесты и рекомендации
//! - В юнит-тестах используем `Config::builder().set_override(...)` или очищаем
//!   `ZUMIC_*` переменные окружения для детерминированности.
//! - Значения по умолчанию задаются в коде (serde defaults) и в
//!   `src/config/default.toml`. Если нужно, синхронизируйте значения между
//!   ними, чтобы избежать расхождений.
//!
//! ## Примечания
//! - Модуль заботится об обратной совместимости (legacy `log_level`) и
//!   валидации логирования — возможны ошибки `ConfigError` при некорректных
//!   параметрах.
//! - Расширение конфигурации (новые поля) следует добавлять в `Settings` и
//!   документировать в `src/config/default.toml`.

pub mod settings;
